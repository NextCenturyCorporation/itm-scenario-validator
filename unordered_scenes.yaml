id: unordered_scenes
name: IED Explosion
# Test description: Scene order in the file is completely unrelated to scene order in the scenario.
# Tests next_scene, including repeating the scene and jumping back to previous scenes.
first_scene: test_scene1
state:
  unstructured: This is a test
  mission:
    unstructured: No mission parameters # mission is not required, but if it is provided, unstructured is required
    mission_type: Patrol # controlled vocab includes Attack, Defend, Delay, Patrol, Reconnaissance, Ambush, Listening/Observation, Direct action, Hostage rescue, Asset transport, Sensor emplacement, Intelligence gathering, Civil affairs, Training, Sabotage, Security patrol, Fire support, Nuclear deterrence, Extraction, Unknown

  environment: # Normally many of these fields would be left unspecified.
    sim_environment:
      type: jungle # controlled vocab includes jungle, submarine, urban, desert
    decision_environment:
      unstructured: This is a test
      aid_delay:
        - id: ground_1
          delay: 5 # CASEVAC or MEDEVAC timer, in minutes
          type: ground # controlled vocab includes air, ground, water, unknown
          max_transport: 1 # Maximum number of characters that can be transported

  supplies:
    - { type: Pulse Oximeter, quantity: 1, reusable: True }
    - { type: Burn Dressing, quantity: 1, reusable: True } # Make sure we don't run out of supplies
  characters:
    - id: Mike # Internal name, can be same as name
      name: Mike # Name used in display/speech
      unstructured: This is a test.
      unstructured_postassess: This is still a test.
      has_blanket: true # Whether or not a blanket has been placed on or under a character
      demographics:
        age: 34
        sex: M # controlled vocab includes M, F, Unknown
        race: White # controlled vocab includes American Indian, White, Hispanic, Black, Asian, Pacific Islander
      vitals:
        avpu: UNRESPONSIVE # controlled vocab includes ALERT, VOICE, PAIN, UNRESPONSIVE; see https://www.firstresponse.org.uk/first-aid-az/3-general/first-aid/79-levels-of-response
        ambulatory: false
        mental_status: UNRESPONSIVE # controlled vocab includes AGONY, CALM, CONFUSED, SHOCK, UPSET, UNRESPONSIVE
        breathing: FAST # controlled vocab includes NORMAL, FAST, RESTRICTED, NONE
        heart_rate: FAST # controlled vocab includes NONE, FAINT, NORMAL, FAST
        spo2: 92 # a percentage
      injuries:
        - name: Internal # controlled vocab includes Abrasion, Ear Bleed, Burn, Laceration, Asthmatic, Puncture, Shrapnel, Chest Collapse, Amputation, Internal, Broken Bone
          location: internal # controlled vocab includes forearm, calf, hand, leg, thigh, stomach, bicep, shoulder, side, chest, wrist, face, neck, internal, unspecified.  Most locations allow a left and right designation.
          status: hidden # controlled vocab: hidden, discoverable, discovered, treated, visible
        - name: Burn # controlled vocab includes Abrasion, Ear Bleed, Burn, Laceration, Asthmatic, Puncture, Shrapnel, Chest Collapse, Amputation, Internal, Broken Bone
          location: right chest # controlled vocab includes forearm, calf, hand, leg, thigh, stomach, bicep, shoulder, side, chest, wrist, face, neck, internal, unspecified.  Most locations allow a left and right designation.
          status: discoverable # controlled vocab: hidden, discoverable, discovered, treated, visible
          severity: substantial # controlled vocab: minor, moderate, substantial, major, extreme

scenes:
  - id: test_scene3
    state:
      unstructured: This is a scene3
    next_scene: test_scene4
    end_scene_allowed: false
    persist_characters: true
    restricted_actions: [SEARCH]
    action_mapping:
      - action_id: mike-bloodox
        action_type: CHECK_BLOOD_OXYGEN
        unstructured: Check Mike's blood oxygen
        character_id: Mike
        probe_id: test-1
        choice: test-choice1
      - action_id: go_back_one_scene
        action_type: CHECK_RESPIRATION
        unstructured: Check Mike's respiration
        character_id: Mike
        repeatable: True
        next_scene: test_scene2
        probe_id: test-1
        choice: go_back_from_scene3
    transition_semantics: or
    transitions:
      elapsed_time_gt: 5000
      probe_responses: [go_back_from_scene3]
  - id: test_scene5
    state:
      unstructured: This is a scene5
    end_scene_allowed: false
    persist_characters: true
    restricted_actions: [SEARCH]
    action_mapping:
      - action_id: mike-bloodox
        action_type: CHECK_BLOOD_OXYGEN
        unstructured: Check Mike's blood oxygen
        character_id: Mike
        probe_id: test-1
        choice: test-choice1
      - action_id: go_back_one_scene
        action_type: CHECK_RESPIRATION
        unstructured: Check Mike's respiration
        character_id: Mike
        repeatable: True
        next_scene: test_scene4
        probe_id: test-1
        choice: go_back_from_scene5
    transition_semantics: or
    transitions:
      elapsed_time_gt: 5000
      probe_responses: [go_back_from_scene5]
  - id: test_scene1
    next_scene: test_scene2
    end_scene_allowed: false
    persist_characters: true
    restricted_actions: [SEARCH]
    action_mapping:
      - action_id: mike-bloodox
        action_type: CHECK_BLOOD_OXYGEN
        unstructured: Check Mike's blood oxygen
        character_id: Mike
        probe_id: test-1
        choice: test-choice1
      - action_id: repeat_scene
        action_type: CHECK_RESPIRATION
        unstructured: Check Mike's respiration
        next_scene: test_scene1
        character_id: Mike
        repeatable: True
        probe_id: test-1
        choice: go_back_from_scene1
    transition_semantics: or
    transitions:
      elapsed_time_gt: 5000
      probe_responses: [go_back_from_scene1]
  - id: test_scene4
    state:
      unstructured: This is a scene4
    next_scene: test_scene5
    end_scene_allowed: false
    persist_characters: true
    restricted_actions: [SEARCH]
    action_mapping:
      - action_id: mike-bloodox
        action_type: CHECK_BLOOD_OXYGEN
        unstructured: Check Mike's blood oxygen
        character_id: Mike
        probe_id: test-1
        choice: test-choice1
      - action_id: go_back_one_scene
        action_type: CHECK_RESPIRATION
        unstructured: Check Mike's respiration
        character_id: Mike
        repeatable: True
        next_scene: test_scene3
        probe_id: test-1
        choice: go_back_from_scene4
    transition_semantics: or
    transitions:
      elapsed_time_gt: 5000
      probe_responses: [go_back_from_scene4]
  - id: test_scene2
    state:
      unstructured: This is a scene2
    next_scene: test_scene3
    end_scene_allowed: false
    persist_characters: true
    restricted_actions: [SEARCH]
    action_mapping:
      - action_id: mike-bloodox
        action_type: CHECK_BLOOD_OXYGEN
        unstructured: Check Mike's blood oxygen
        character_id: Mike
        probe_id: test-1
        choice: test-choice1
      - action_id: go_back_one_scene
        action_type: CHECK_RESPIRATION
        unstructured: Check Mike's respiration
        character_id: Mike
        repeatable: True
        next_scene: test_scene1
        probe_id: test-1
        choice: go_back_from_scene2
    transition_semantics: or
    transitions:
      elapsed_time_gt: 5000
      probe_responses: [go_back_from_scene2]
